## Scraping the data from Scientific Journals
library(rvest)
library(dplyr)
library(stringr)
library(lubridate)
#AJAS
no<-23723
url <- paste0("https://www.ajas.info/journal/view.php?number=",no)
html <- read_html(url, encoding="UTF-8")
#keywords
keywords<-html %>% html_nodes(".metadata-entry") %>% html_children() %>% html_text()
keywords<-data.frame(keywords=keywords[11:15])
keywords
library(rvest)
library(dplyr)
library(stringr)
library(lubridate)
#Journal of Animal sciecne
vol<-95
issue<-10
page<-4239
url <- paste0("https://www.animalsciencepublications.org/publications/jas/articles/",vol,"/",issue,"/",page)
html <- read_html(url, encoding="UTF-8")
#keywords
keywords<-html %>% html_nodes(".kwd-group") %>% html_children() %>% html_text()
keywords<-gsub(";","",keywords)
keywords<-data.frame(vol=vol, issue=issue, page=page,keywords=keywords)
keywords
#history
history<-html %>% html_nodes(".history-list") %>% html_children() %>% html_text()
recieved<-gsub(",","",str_sub(history[1],start=11)) %>% as.character()
accepted<-gsub(",","",str_sub(history[2],start=11)) %>% as.character()
published<-gsub(",","",str_sub(history[3],start=12)) %>% as.character()
recieved <- gsub("\u00A0", " ", recieved) #solve the problem of <u+00a0>
accepted <- gsub("\u00A0", " ", accepted)
history<-data.frame(recieved=recieved,accepted=accepted,published=published, corresponding=NA)
history
#corresponding_author
corresponding<-html %>% html_node(".fn-corresp") %>% html_children() %>% .[[2]] %>% html_text()
history[,4]<-corresponding
history
recieved
mdy(recieved)
numMonth <- function(x) {
months <- list(jan=1,feb=2,mar=3,apr=4,may=5,jun=6,jul=7,aug=8,sep=9,oct=10,nov=11,dec=12)
x <- tolower(x)
sapply(x,function(x) months[[x]])
}
numMonth(feb)
numMonth("feb")
list(1,2,3)
?sapply(list, function)
#history
history<-html %>% html_nodes(".history-list") %>% html_children() %>% html_text()
recieved<-gsub(",","",str_sub(history[1],start=11))
accepted<-gsub(",","",str_sub(history[2],start=11))
published<-gsub(",","",str_sub(history[3],start=12))
recieved <- gsub("\u00A0", " ", recieved) #solve the problem of <u+00a0>. thank you enersto Huang (https://stackoverflow.com/users/7549197/enersto-huang)
accepted <- gsub("\u00A0", " ", accepted)
history<-data.frame(recieved=recieved,accepted=accepted,published=published, corresponding=NA)
history
library(rvest)
library(dplyr)
library(stringr)
page<-683
url <- paste0("https://www.feedipedia.org/node/",page)
html <- read_html(url, encoding="UTF-8")
name <- html %>% html_nodes(".art-postheadericon") %>% html_children() %>% html_text()
name
name <- html %>% html_nodes(".art-postheadericon")
name
name <- html %>% html_nodes(".art-postheadericon") %>% html_text()
name
categories <- html %>% html_nodes(".item-list") %>% html_children() %>% html_text()
categories
species <- html %>% html_nodes(".notranslate") %>% html_text()
species
page<-684
url <- paste0("https://www.feedipedia.org/node/",page)
html <- read_html(url, encoding="UTF-8")
name <- html %>% html_nodes(".art-postheadericon") %>% html_text()
species <- html %>% html_nodes(".notranslate") %>% html_text()
name
species
page<-111
url <- paste0("https://www.feedipedia.org/node/",page)
html <- read_html(url, encoding="UTF-8")
name <- html %>% html_nodes(".art-postheadericon") %>% html_text()
species <- html %>% html_nodes(".notranslate") %>% html_text()
name
table <- html %>% html_nodes(".field-content") %>% html_table()
table <- html %>% html_nodes(".field-content") %>% html_table()
table <- html %>% html_nodes(".style="width:100%;") %>% html_table()
table <- html %>% html_nodes("style="width:100%;") %>% html_table()
table <- html %>% html_nodes("field-content")
table
table <- html %>% html_nodes("field-content") %>% html_text()
table
#URL list
setwd("D:\GitHub\journal_scraping")
#URL list
setwd("D:GitHub\journal_scraping")
#URL list
setwd("D:/GitHub/journal_scraping")
readxl::read_excel("journal_URL.xlsx")
list <- readxl::read_excel("journal_URL.xlsx") #set URL list
list <- filter(list, journal == "journal of animal science")
str(list)
list <- filter(list, list$journal == "journal of animal science")
list <- filter(list, journal == "journal of animal science")
list$journal <- as.factor(list$journal)
list <- readxl::read_excel("journal_URL.xlsx") #set URL list
list$journal <- as.factor(list$journal)
list <- filter(list, journal == "journal of animal science")
str(journal)
str(list)
library(rvest)
library(dplyr)
library(stringr)
library(lubridate)
list$journal <- as.factor(list$journal)
list <- filter(list, journal == "journal of animal science")
list <- readxl::read_excel("journal_URL.xlsx") #set URL list
str(list)
list <- filter(list, journal == "journal of animal science")
list
#data.frame
JAS_result<-list
#Journal of Animal sciecne
url <- list$URL[1]
url
keywords<-data.frame(vol=vol, issue=issue, page=page,keywords=keywords)
history<-data.frame(recieved=recieved,accepted=accepted,published=published, corresponding=NA)
#data.frame
JAS_result<-list
html <- read_html(url, encoding="UTF-8")
#keywords
keywords<-html %>% html_nodes(".kwd-group") %>% html_children() %>% html_text()
keywords
keywords<-gsub(";","",keywords)
keywords
keywords<-gsub(" ","",keywords)
keywords
JAS_result<-cbind(JAS_result, keywords=NA)
JAS_result
JAS_result$keywords[1] <- keywords
JAS_result
#keywords
keywords<-html %>% html_nodes(".kwd-group") %>% html_text()
keywords<-gsub(";","",keywords)
keywords
JAS_result$keywords[1] <- keywords
JAS_result
keywords<-gsub("\n\t","",keywords)
JAS_result$keywords[1] <- keywords
JAS_result
View(JAS_result)
#history
history<-html %>% html_nodes(".history-list") %>% html_children() %>% html_text()
recieved<-gsub(",","",str_sub(history[1],start=11))
#Subject
subject<-html %>% html_nodes(".h1") %>% html_text()
subject
#Subject
subject<-html %>% html_nodes(".inside_one") %>% html_text()
subject
#Subject
subject<-html %>% html_nodes(xpath="//*[@id="one"]/div/h1/text()") %>% html_text()
#Subject
subject<-html %>% html_nodes(xpath="//*[@id="one"]/div/h1/text()")
#Subject
subject<-html %>% html_nodes(xpath="//*[@id=""]/div/h1/text()") %>% html_text()
#Subject
subject<-html() %>% html_nodes(xpath="//*[@id="one"]/div/h1/text()") %>% html_text()
#Subject
subject<-html %>% html_nodes(xpath="//*[@id="one"]/div/h1/text()")
#Subject
subject<-html %>% html_nodes(xpath="/*[@id="one"]/div/h1/text()") %>% html_text()
#Subject
subject<-html %>% html_nodes(xpath="//*[@id="one"]/div/h1") %>% html_text()
?html_nodes
#Subject
subject<-html %>% html_nodes(xpath="/div/h1/text()") %>% html_text()
subject
#Subject
subject<-html %>% html_nodes(xpath="//div/h1/text()") %>% html_text()
subject
JAS_result<-cbind(JAS_result, corresponding=NA)
JAS_result<-cbind(JAS_result, subject=NA)
JAS_result$subject[1] <- subject
JAS_result
View(JAS_result)
#corresponding_author
corresponding<-html %>% html_node(".fn-corresp") %>% html_children() %>% .[[2]] %>% html_text()
JAS_result$corresponding[1]<-corresponding
